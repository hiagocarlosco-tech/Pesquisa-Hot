<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Pesquisa Hot Sushi</title>
<style>
    body {
        margin: 0;
        font-family: "Inter", sans-serif;
        background: #0d0d0d;
        color: #fff;
        padding: 0;
    }

    .container {
        width: 100%;
        max-width: 500px;
        margin: auto;
        padding: 20px;
        text-align: center;
    }

    .logo {
        width: 160px;
        display: block;
        margin: 20px auto;
    }

    .card {
        background: #1a1a1a;
        padding: 22px;
        border-radius: 16px;
        margin-top: 20px;
        animation: fade .4s ease;
    }

    button {
        width: 100%;
        padding: 15px;
        border-radius: 12px;
        margin-top: 12px;
        border: none;
        font-size: 16px;
        background: #e63946;
        color: #fff;
        font-weight: 600;
        cursor: pointer;
        transition: 0.2s;
    }

    button:hover { opacity: 0.8; }

    .hidden { display: none; }

    /* Barra de progresso */
    .progress-bar {
        width: 100%;
        height: 8px;
        background: #333;
        border-radius: 20px;
        margin: 20px 0;
        overflow: hidden;
    }
    .progress {
        height: 100%;
        width: 0%;
        background: linear-gradient(90deg, #e63946, #ff6b6b);
        transition: width .35s ease;
    }

    @keyframes fade {
        from { opacity: 0; transform: translateY(15px);} 
        to { opacity: 1; transform: translateY(0);}   
    }
</style>
</head>
<body>

<div class="container">
    <img src="https://i.postimg.cc/GhH84jss/Gerente-Geral-supervisiona-opera-es-equipe-finan-as-e-metas-Chef-de-Cozinha-lidera-a-produ-o-e-controle.png" class="logo" />

    <div class="progress-bar"><div id="progress" class="progress"></div></div>

    <!-- Etapa 1 -->
    <div id="step1" class="card">
        <h3>Qual seu nome?</h3>
        <input id="nome" type="text" placeholder="Digite seu nome" style="width:100%; padding:12px; border-radius:10px; border:none; margin-top:12px;" />
        <button onclick="nextStep(2)">Avançar</button>
    </div>

    <!-- Etapa 2 -->
    <div id="step2" class="card hidden">
        <h3>Você já pediu conosco antes?</h3>
        <button onclick="chooseExp('sim')">Sim</button>
        <button onclick="chooseExp('nao')">Não</button>
    </div>

    <!-- Etapa 3A -->
    <div id="step3a" class="card hidden">
        <h3>Por que você parou de pedir?</h3>
        <button onclick="setMotivo('Demora na entrega')">Demora na entrega</button>
        <button onclick="setMotivo('Qualidade variou')">Qualidade variou</button>
        <button onclick="setMotivo('Preço alto')">Preço alto</button>
    </div>

    <!-- Etapa 3B -->
    <div id="step3b" class="card hidden">
        <h3>Por que ainda não pediu com a gente?</h3>
        <button onclick="setMotivo('Não conhecia')">Não conhecia</button>
        <button onclick="setMotivo('Preferi outro restaurante')">Preferi outro restaurante</button>
        <button onclick="setMotivo('Tive uma experiência ruim')">Tive uma experiência ruim</button>
    </div>

    <!-- Etapa 4 -->
    <div id="step4" class="card hidden">
        <h3>Quer deixar um feedback?</h3>
        <textarea id="feedback" placeholder="Escreva aqui" style="width:100%;height:120px;border-radius:12px;border:none;padding:12px;"></textarea>
        <button onclick="finalizar()">Enviar e Fazer Pedido</button>
    </div>
</div>

<script>
let currentStep = 1;

function updateProgress() {
    const total = 4;
    let pct = (currentStep - 1) / (total - 1) * 100;
    document.getElementById("progress").style.width = pct + "%";
}

function nextStep(step) {
    document.getElementById("step" + currentStep).classList.add("hidden");
    currentStep = step;
    document.getElementById("step" + step).classList.remove("hidden");
    updateProgress();
}

function chooseExp(tipo) {
    window.experienciaEscolhida = tipo;
    document.getElementById("step2").classList.add("hidden");
    currentStep = 3;
    if (tipo === "sim") document.getElementById("step3a").classList.remove("hidden");
    else document.getElementById("step3b").classList.remove("hidden");
    updateProgress();
}

function setMotivo(m) {
    window.selectedMotivo = m;
    document.getElementById("step3a").classList.add("hidden");
    document.getElementById("step3b").classList.add("hidden");
    nextStep(4);
}

async function enviarParaSheets() {
    const data = {
        nome: document.getElementById("nome")?.value || "",
        experiencia: window.experienciaEscolhida || "",
        motivo: window.selectedMotivo || "",
        feedback: document.getElementById("feedback")?.value || ""
    };

    await fetch("https://script.google.com/macros/s/AKfycbzSNwtkiIEY6OU-vHqzeMz-m1r6LO9mcbBODI7eEWB22cKvYcqt_2u7sdc62dhCKPw/exec", {
        method: "POST",
        mode: "no-cors",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(data)
    });
}

async function finalizar() {
    await enviarParaSheets();
    window.location.href = "https://delivery.yooga.app/hot-delivery/tabs/home";
}
</script>
</body>
</html>
